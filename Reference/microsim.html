

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Python microsim model &mdash; RAMP-UA 0.2.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="OpenCL microsim model" href="ramp.html" />
    <link rel="prev" title="RAMP-UA API Reference" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> RAMP-UA
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">RAMP-UA API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Python model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.QUANTRampAPI2">microsim.QUANTRampAPI2 module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.activity_location">microsim.activity_location module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.column_names">microsim.column_names module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.dashboard">microsim.dashboard module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.dashboard_QUANT">microsim.dashboard_QUANT module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.initialisation_cache">microsim.initialisation_cache module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.load_msoa_locations">microsim.load_msoa_locations module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.main">microsim.main module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#microsim-microsim-initialisation-module">microsim.microsim_initialisation module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.microsim_model">microsim.microsim_model module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.population_initialisation">microsim.population_initialisation module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.quant_api">microsim.quant_api module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.r_interface">microsim.r_interface module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim.utilities">microsim.utilities module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-microsim">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ramp.html">OpenCL model</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">RAMP-UA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">RAMP-UA API Reference</a> &raquo;</li>
        
      <li>Python microsim model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/Reference/microsim.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python-microsim-model">
<h1>Python microsim model<a class="headerlink" href="#python-microsim-model" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-microsim.QUANTRampAPI2">
<span id="microsim-quantrampapi2-module"></span><h2>microsim.QUANTRampAPI2 module<a class="headerlink" href="#module-microsim.QUANTRampAPI2" title="Permalink to this headline">¶</a></h2>
<p>Public interface to the data
Contains accessor functions for getting probabilities of trips from MSOA or IZ origins to
primary schools, secondary schools and retail locations.
Further information is contained in each function description.
Changes made to read in data in format suitable for RAMP UA.</p>
<dl class="py function">
<dt id="microsim.QUANTRampAPI2.getProbableHospitalByMSOAIZ">
<code class="sig-prename descclassname">microsim.QUANTRampAPI2.</code><code class="sig-name descname">getProbableHospitalByMSOAIZ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dfHospitalPopulation</span></em>, <em class="sig-param"><span class="n">dfHospitalZones</span></em>, <em class="sig-param"><span class="n">hospital_probHijmsoa_iz</span></em>, <em class="sig-param"><span class="n">threshold</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.QUANTRampAPI2.getProbableHospitalByMSOAIZ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.QUANTRampAPI2.getProbablePrimarySchoolsByMSOAIZ">
<code class="sig-prename descclassname">microsim.QUANTRampAPI2.</code><code class="sig-name descname">getProbablePrimarySchoolsByMSOAIZ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dfPrimaryPopulation</span></em>, <em class="sig-param"><span class="n">dfPrimaryZones</span></em>, <em class="sig-param"><span class="n">primary_probPij</span></em>, <em class="sig-param"><span class="n">msoa_iz</span></em>, <em class="sig-param"><span class="n">threshold</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.QUANTRampAPI2.getProbablePrimarySchoolsByMSOAIZ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.QUANTRampAPI2.getProbableRetailByMSOAIZ">
<code class="sig-prename descclassname">microsim.QUANTRampAPI2.</code><code class="sig-name descname">getProbableRetailByMSOAIZ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dfRetailPointsPopulation</span></em>, <em class="sig-param"><span class="n">dfRetailPointsZones</span></em>, <em class="sig-param"><span class="n">retailpoints_probSij</span></em>, <em class="sig-param"><span class="n">msoa_iz</span></em>, <em class="sig-param"><span class="n">threshold</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.QUANTRampAPI2.getProbableRetailByMSOAIZ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.QUANTRampAPI2.getProbableSecondarySchoolsByMSOAIZ">
<code class="sig-prename descclassname">microsim.QUANTRampAPI2.</code><code class="sig-name descname">getProbableSecondarySchoolsByMSOAIZ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dfSecondaryPopulation</span></em>, <em class="sig-param"><span class="n">dfSecondaryZones</span></em>, <em class="sig-param"><span class="n">secondary_probPij</span></em>, <em class="sig-param"><span class="n">msoa_iz</span></em>, <em class="sig-param"><span class="n">threshold</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.QUANTRampAPI2.getProbableSecondarySchoolsByMSOAIZ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.QUANTRampAPI2.get_flows">
<code class="sig-prename descclassname">microsim.QUANTRampAPI2.</code><code class="sig-name descname">get_flows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">venue</span></em>, <em class="sig-param"><span class="n">Population</span></em>, <em class="sig-param"><span class="n">Zones</span></em>, <em class="sig-param"><span class="n">probPij</span></em>, <em class="sig-param"><span class="n">msoa_list</span></em>, <em class="sig-param"><span class="n">threshold</span></em>, <em class="sig-param"><span class="n">thresholdtype</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.QUANTRampAPI2.get_flows" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.QUANTRampAPI2.loadMatrix">
<code class="sig-prename descclassname">microsim.QUANTRampAPI2.</code><code class="sig-name descname">loadMatrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.QUANTRampAPI2.loadMatrix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.QUANTRampAPI2.readQUANT">
<code class="sig-prename descclassname">microsim.QUANTRampAPI2.</code><code class="sig-name descname">readQUANT</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">quant_dir</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.QUANTRampAPI2.readQUANT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-microsim.activity_location">
<span id="microsim-activity-location-module"></span><h2>microsim.activity_location module<a class="headerlink" href="#module-microsim.activity_location" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="microsim.activity_location.ActivityLocation">
<em class="property">class </em><code class="sig-prename descclassname">microsim.activity_location.</code><code class="sig-name descname">ActivityLocation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">locations</span></em>, <em class="sig-param"><span class="n">flows</span></em>, <em class="sig-param"><span class="n">individuals</span></em>, <em class="sig-param"><span class="n">duration_col</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.activity_location.ActivityLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to represent information about activity locations, e.g. retail destinations, workpaces, etc.</p>
<dl class="py method">
<dt id="microsim.activity_location.ActivityLocation.get_dangers">
<code class="sig-name descname">get_dangers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.activity_location.ActivityLocation.get_dangers" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the danger associated with each location as a list. These will be in the same order as the
location IDs returned by <cite>get_ids()</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="microsim.activity_location.ActivityLocation.get_dataframe_copy">
<code class="sig-name descname">get_dataframe_copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.activity_location.ActivityLocation.get_dataframe_copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a copy of the dataframe that underpins this ActivityLocation
:rtype: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.activity_location.ActivityLocation.get_ids">
<code class="sig-name descname">get_ids</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.activity_location.ActivityLocation.get_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrn the IDs of each destination.
Shouldn’t need to know these. Use get_dangers or update_dangers instead</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="microsim.activity_location.ActivityLocation.get_indices">
<code class="sig-name descname">get_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.activity_location.ActivityLocation.get_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the index (row number) of each destination
Shouldn’t need to know these. Use get_dangers or update_dangers instead</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="microsim.activity_location.ActivityLocation.get_name">
<code class="sig-name descname">get_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.activity_location.ActivityLocation.get_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name of this activity. This is used to label columns in the file of individuals</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="microsim.activity_location.ActivityLocation.update_dangers">
<code class="sig-name descname">update_dangers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dangers</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.activity_location.ActivityLocation.update_dangers" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the danger associated with each location
:type dangers: <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]
:param dangers: A list of dangers for each location. Must be in the same order as the locations as
returned by <cite>get_ids</cite>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-microsim.column_names">
<span id="microsim-column-names-module"></span><h2>microsim.column_names module<a class="headerlink" href="#module-microsim.column_names" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="microsim.column_names.ColumnNames">
<em class="property">class </em><code class="sig-prename descclassname">microsim.column_names.</code><code class="sig-name descname">ColumnNames</code><a class="headerlink" href="#microsim.column_names.ColumnNames" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Used to record standard dataframe column names used throughout</p>
<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.ACTIVITY_DURATION">
<code class="sig-name descname">ACTIVITY_DURATION</code><em class="property"> = '_Duration'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.ACTIVITY_DURATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.ACTIVITY_DURATION_INITIAL">
<code class="sig-name descname">ACTIVITY_DURATION_INITIAL</code><em class="property"> = '_Duration_Initial'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.ACTIVITY_DURATION_INITIAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.ACTIVITY_FLOWS">
<code class="sig-name descname">ACTIVITY_FLOWS</code><em class="property"> = '_Flows'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.ACTIVITY_FLOWS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.ACTIVITY_RISK">
<code class="sig-name descname">ACTIVITY_RISK</code><em class="property"> = '_Risk'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.ACTIVITY_RISK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.ACTIVITY_VENUES">
<code class="sig-name descname">ACTIVITY_VENUES</code><em class="property"> = '_Venues'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.ACTIVITY_VENUES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="microsim.column_names.ColumnNames.Activities">
<em class="property">class </em><code class="sig-name descname">Activities</code><a class="headerlink" href="#microsim.column_names.ColumnNames.Activities" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.Activities.ALL">
<code class="sig-name descname">ALL</code><em class="property"> = ['Retail', 'PrimarySchool', 'SecondarySchool', 'Home', 'Work']</em><a class="headerlink" href="#microsim.column_names.ColumnNames.Activities.ALL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.Activities.HOME">
<code class="sig-name descname">HOME</code><em class="property"> = 'Home'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.Activities.HOME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.Activities.PRIMARY">
<code class="sig-name descname">PRIMARY</code><em class="property"> = 'PrimarySchool'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.Activities.PRIMARY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.Activities.RETAIL">
<code class="sig-name descname">RETAIL</code><em class="property"> = 'Retail'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.Activities.RETAIL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.Activities.SECONDARY">
<code class="sig-name descname">SECONDARY</code><em class="property"> = 'SecondarySchool'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.Activities.SECONDARY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.Activities.WORK">
<code class="sig-name descname">WORK</code><em class="property"> = 'Work'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.Activities.WORK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.CURRENT_RISK">
<code class="sig-name descname">CURRENT_RISK</code><em class="property"> = 'current_risk'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.CURRENT_RISK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DISEASE_EXPOSED_DAYS">
<code class="sig-name descname">DISEASE_EXPOSED_DAYS</code><em class="property"> = 'exposed_days'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DISEASE_EXPOSED_DAYS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DISEASE_PRESYMP">
<code class="sig-name descname">DISEASE_PRESYMP</code><em class="property"> = 'presymp_days'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DISEASE_PRESYMP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DISEASE_STATUS">
<code class="sig-name descname">DISEASE_STATUS</code><em class="property"> = 'disease_status'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DISEASE_STATUS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DISEASE_STATUS_CHANGED">
<code class="sig-name descname">DISEASE_STATUS_CHANGED</code><em class="property"> = 'status_changed'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DISEASE_STATUS_CHANGED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DISEASE_SYMP_DAYS">
<code class="sig-name descname">DISEASE_SYMP_DAYS</code><em class="property"> = 'symp_days'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DISEASE_SYMP_DAYS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="microsim.column_names.ColumnNames.DiseaseStatuses">
<em class="property">class </em><code class="sig-name descname">DiseaseStatuses</code><a class="headerlink" href="#microsim.column_names.ColumnNames.DiseaseStatuses" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DiseaseStatuses.ALL">
<code class="sig-name descname">ALL</code><em class="property"> = [0, 1, 2, 3, 4, 5, 6]</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DiseaseStatuses.ALL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DiseaseStatuses.ASYMPTOMATIC">
<code class="sig-name descname">ASYMPTOMATIC</code><em class="property"> = 4</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DiseaseStatuses.ASYMPTOMATIC" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DiseaseStatuses.DEAD">
<code class="sig-name descname">DEAD</code><em class="property"> = 6</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DiseaseStatuses.DEAD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DiseaseStatuses.EXPOSED">
<code class="sig-name descname">EXPOSED</code><em class="property"> = 1</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DiseaseStatuses.EXPOSED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DiseaseStatuses.PRESYMPTOMATIC">
<code class="sig-name descname">PRESYMPTOMATIC</code><em class="property"> = 2</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DiseaseStatuses.PRESYMPTOMATIC" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DiseaseStatuses.RECOVERED">
<code class="sig-name descname">RECOVERED</code><em class="property"> = 5</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DiseaseStatuses.RECOVERED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DiseaseStatuses.SUSCEPTIBLE">
<code class="sig-name descname">SUSCEPTIBLE</code><em class="property"> = 0</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DiseaseStatuses.SUSCEPTIBLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.DiseaseStatuses.SYMPTOMATIC">
<code class="sig-name descname">SYMPTOMATIC</code><em class="property"> = 3</em><a class="headerlink" href="#microsim.column_names.ColumnNames.DiseaseStatuses.SYMPTOMATIC" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.INDIVIDUAL_AGE">
<code class="sig-name descname">INDIVIDUAL_AGE</code><em class="property"> = 'DC1117EW_C_AGE'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.INDIVIDUAL_AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.INDIVIDUAL_ETH">
<code class="sig-name descname">INDIVIDUAL_ETH</code><em class="property"> = 'DC2101EW_C_ETHPUK11'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.INDIVIDUAL_ETH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.INDIVIDUAL_SEX">
<code class="sig-name descname">INDIVIDUAL_SEX</code><em class="property"> = 'DC1117EW_C_SEX'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.INDIVIDUAL_SEX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.LOCATION_DANGER">
<code class="sig-name descname">LOCATION_DANGER</code><em class="property"> = 'Danger'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.LOCATION_DANGER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.LOCATION_ID">
<code class="sig-name descname">LOCATION_ID</code><em class="property"> = 'ID'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.LOCATION_ID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.LOCATION_NAME">
<code class="sig-name descname">LOCATION_NAME</code><em class="property"> = 'Location_Name'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.LOCATION_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.TRAVEL_BUS">
<code class="sig-name descname">TRAVEL_BUS</code><em class="property"> = 'Bus'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.TRAVEL_BUS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.TRAVEL_CAR">
<code class="sig-name descname">TRAVEL_CAR</code><em class="property"> = 'Car'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.TRAVEL_CAR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.TRAVEL_TRAIN">
<code class="sig-name descname">TRAVEL_TRAIN</code><em class="property"> = 'Train'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.TRAVEL_TRAIN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="microsim.column_names.ColumnNames.TRAVEL_WALK">
<code class="sig-name descname">TRAVEL_WALK</code><em class="property"> = 'Walk'</em><a class="headerlink" href="#microsim.column_names.ColumnNames.TRAVEL_WALK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-microsim.dashboard">
<span id="microsim-dashboard-module"></span><h2>microsim.dashboard module<a class="headerlink" href="#module-microsim.dashboard" title="Permalink to this headline">¶</a></h2>
<p>Created on Thu Jun  4 16:22:57 2020</p>
<p>&#64;author: Natalie</p>
<dl class="py function">
<dt id="microsim.dashboard.calc_nr_days">
<code class="sig-prename descclassname">microsim.dashboard.</code><code class="sig-name descname">calc_nr_days</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.dashboard.calc_nr_days" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.dashboard.create_counts_dict">
<code class="sig-prename descclassname">microsim.dashboard.</code><code class="sig-name descname">create_counts_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conditions_dict</span></em>, <em class="sig-param"><span class="n">r_range</span></em>, <em class="sig-param"><span class="n">data_dir</span></em>, <em class="sig-param"><span class="n">start_day</span></em>, <em class="sig-param"><span class="n">end_day</span></em>, <em class="sig-param"><span class="n">start_run</span></em>, <em class="sig-param"><span class="n">nr_runs</span></em>, <em class="sig-param"><span class="n">age_cat</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.dashboard.create_counts_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts per condition (3D, mean and standard deviation)
Produces 5 types of counts:
msoacounts: nr per msoa and day
agecounts: nr per age category and day
totalcounts: nr per day (across all areas)
cumcounts: nr per MSOA and day
uniquecounts: nr with ‘final’ disease status across time period e.g. someone who is presymptomatic, symptomatic and recoverd is only counted once as recovered
Output: 
msoas                   # list of msoas
totalcounts_dict, cumcounts_dict, agecounts_dict,  msoacounts_dict, cumcounts_dict_3d, totalcounts_dict_std, cumcounts_dict_std, agecounts_dict_std, msoacounts_dict_std, totalcounts_dict_3d, agecounts_dict_3d, msoacounts_dict_3d, uniquecounts_dict_3d, uniquecounts_dict_std, uniquecounts_dict</p>
</dd></dl>

<dl class="py function">
<dt id="microsim.dashboard.create_difference_dict">
<code class="sig-prename descclassname">microsim.dashboard.</code><code class="sig-name descname">create_difference_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dict_sc0</span></em>, <em class="sig-param"><span class="n">dict_sc1</span></em>, <em class="sig-param"><span class="n">lookup_dict</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.dashboard.create_difference_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.dashboard.create_msoa_dangers_dict">
<code class="sig-prename descclassname">microsim.dashboard.</code><code class="sig-name descname">create_msoa_dangers_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dangers_dict</span></em>, <em class="sig-param"><span class="n">keys</span></em>, <em class="sig-param"><span class="n">msoa_codes</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.dashboard.create_msoa_dangers_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts dangers_dict to MSOA level data for the appropriate venue types. Produces average danger score (sum dangers in MSOA / total nr venues in MSOA)
Output: dangers_msoa_dict</p>
</dd></dl>

<dl class="py function">
<dt id="microsim.dashboard.create_venue_dangers_dict">
<code class="sig-prename descclassname">microsim.dashboard.</code><code class="sig-name descname">create_venue_dangers_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">locations_dict</span></em>, <em class="sig-param"><span class="n">r_range</span></em>, <em class="sig-param"><span class="n">data_dir</span></em>, <em class="sig-param"><span class="n">start_day</span></em>, <em class="sig-param"><span class="n">end_day</span></em>, <em class="sig-param"><span class="n">start_run</span></em>, <em class="sig-param"><span class="n">nr_runs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.dashboard.create_venue_dangers_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads in venue pickle files (venues from locations_dict) and populates dangers_dict_3d (raw data: venue, day, run), dangers_dict (mean across runs) and dangers_dict_std (standard deviation across runs)
Possible output includes:
dangers_dict       # mean (value to be plotted)
dangers_dict_std   # standard deviation (could plot as error bars)
dangers_dict_3d    # full 3D data (for debugging)</p>
</dd></dl>

</div>
<div class="section" id="module-microsim.dashboard_QUANT">
<span id="microsim-dashboard-quant-module"></span><h2>microsim.dashboard_QUANT module<a class="headerlink" href="#module-microsim.dashboard_QUANT" title="Permalink to this headline">¶</a></h2>
<p>Created on Thu Jun  4 16:22:57 2020</p>
<p>&#64;author: Natalie</p>
<dl class="py function">
<dt id="microsim.dashboard_QUANT.calc_nr_days">
<code class="sig-prename descclassname">microsim.dashboard_QUANT.</code><code class="sig-name descname">calc_nr_days</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.dashboard_QUANT.calc_nr_days" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.dashboard_QUANT.create_counts_dict">
<code class="sig-prename descclassname">microsim.dashboard_QUANT.</code><code class="sig-name descname">create_counts_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conditions_dict</span></em>, <em class="sig-param"><span class="n">r_range</span></em>, <em class="sig-param"><span class="n">data_dir</span></em>, <em class="sig-param"><span class="n">start_day</span></em>, <em class="sig-param"><span class="n">end_day</span></em>, <em class="sig-param"><span class="n">start_run</span></em>, <em class="sig-param"><span class="n">nr_runs</span></em>, <em class="sig-param"><span class="n">age_cat</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.dashboard_QUANT.create_counts_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts per condition (3D, mean and standard deviation)
Produces 5 types of counts:
msoacounts: nr per msoa and day
agecounts: nr per age category and day
totalcounts: nr per day (across all areas)
cumcounts: nr per MSOA and day
uniquecounts: nr with ‘final’ disease status across time period e.g. someone who is presymptomatic, symptomatic and recoverd is only counted once as recovered
Output: 
msoas                   # list of msoas
totalcounts_dict, cumcounts_dict, agecounts_dict,  msoacounts_dict, cumcounts_dict_3d, totalcounts_dict_std, cumcounts_dict_std, agecounts_dict_std, msoacounts_dict_std, totalcounts_dict_3d, agecounts_dict_3d, msoacounts_dict_3d, uniquecounts_dict_3d, uniquecounts_dict_std, uniquecounts_dict</p>
</dd></dl>

<dl class="py function">
<dt id="microsim.dashboard_QUANT.create_difference_dict">
<code class="sig-prename descclassname">microsim.dashboard_QUANT.</code><code class="sig-name descname">create_difference_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dict_sc0</span></em>, <em class="sig-param"><span class="n">dict_sc1</span></em>, <em class="sig-param"><span class="n">lookup_dict</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.dashboard_QUANT.create_difference_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.dashboard_QUANT.create_msoa_dangers_dict">
<code class="sig-prename descclassname">microsim.dashboard_QUANT.</code><code class="sig-name descname">create_msoa_dangers_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dangers_dict</span></em>, <em class="sig-param"><span class="n">keys</span></em>, <em class="sig-param"><span class="n">msoa_codes</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.dashboard_QUANT.create_msoa_dangers_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts dangers_dict to MSOA level data for the appropriate venue types. Produces average danger score (sum dangers in MSOA / total nr venues in MSOA)
Output: dangers_msoa_dict</p>
</dd></dl>

<dl class="py function">
<dt id="microsim.dashboard_QUANT.create_venue_dangers_dict">
<code class="sig-prename descclassname">microsim.dashboard_QUANT.</code><code class="sig-name descname">create_venue_dangers_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">locations_dict</span></em>, <em class="sig-param"><span class="n">r_range</span></em>, <em class="sig-param"><span class="n">data_dir</span></em>, <em class="sig-param"><span class="n">start_day</span></em>, <em class="sig-param"><span class="n">end_day</span></em>, <em class="sig-param"><span class="n">start_run</span></em>, <em class="sig-param"><span class="n">nr_runs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.dashboard_QUANT.create_venue_dangers_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads in venue pickle files (venues from locations_dict) and populates dangers_dict_3d (raw data: venue, day, run), dangers_dict (mean across runs) and dangers_dict_std (standard deviation across runs)
Possible output includes:
dangers_dict       # mean (value to be plotted)
dangers_dict_std   # standard deviation (could plot as error bars)
dangers_dict_3d    # full 3D data (for debugging)</p>
</dd></dl>

</div>
<div class="section" id="module-microsim.initialisation_cache">
<span id="microsim-initialisation-cache-module"></span><h2>microsim.initialisation_cache module<a class="headerlink" href="#module-microsim.initialisation_cache" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="microsim.initialisation_cache.InitialisationCache">
<em class="property">class </em><code class="sig-prename descclassname">microsim.initialisation_cache.</code><code class="sig-name descname">InitialisationCache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cache_dir</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.initialisation_cache.InitialisationCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to handle caching of initialisation data, eg. individuals and activity locations dataframes</p>
<dl class="py method">
<dt id="microsim.initialisation_cache.InitialisationCache.cache_files_exist">
<code class="sig-name descname">cache_files_exist</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.initialisation_cache.InitialisationCache.cache_files_exist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="microsim.initialisation_cache.InitialisationCache.is_empty">
<code class="sig-name descname">is_empty</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.initialisation_cache.InitialisationCache.is_empty" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="microsim.initialisation_cache.InitialisationCache.read_from_cache">
<code class="sig-name descname">read_from_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.initialisation_cache.InitialisationCache.read_from_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="microsim.initialisation_cache.InitialisationCache.store_in_cache">
<code class="sig-name descname">store_in_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">individuals</span></em>, <em class="sig-param"><span class="n">activity_locations</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.initialisation_cache.InitialisationCache.store_in_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-microsim.load_msoa_locations">
<span id="microsim-load-msoa-locations-module"></span><h2>microsim.load_msoa_locations module<a class="headerlink" href="#module-microsim.load_msoa_locations" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="microsim.load_msoa_locations.calculate_msoa_buildings">
<code class="sig-prename descclassname">microsim.load_msoa_locations.</code><code class="sig-name descname">calculate_msoa_buildings</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">osm_buildings</span></em>, <em class="sig-param"><span class="n">msoa_shapes</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.load_msoa_locations.calculate_msoa_buildings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.load_msoa_locations.load_devon_msoas">
<code class="sig-prename descclassname">microsim.load_msoa_locations.</code><code class="sig-name descname">load_devon_msoas</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_dir</span></em>, <em class="sig-param"><span class="n">msoa_filename</span><span class="o">=</span><span class="default_value">'devon_msoas.csv'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.load_msoa_locations.load_devon_msoas" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.load_msoa_locations.load_msoa_shapes">
<code class="sig-prename descclassname">microsim.load_msoa_locations.</code><code class="sig-name descname">load_msoa_shapes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_dir</span></em>, <em class="sig-param"><span class="n">visualize</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.load_msoa_locations.load_msoa_shapes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.load_msoa_locations.load_osm_shapefile">
<code class="sig-prename descclassname">microsim.load_msoa_locations.</code><code class="sig-name descname">load_osm_shapefile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_dir</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.load_msoa_locations.load_osm_shapefile" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.load_msoa_locations.main">
<code class="sig-prename descclassname">microsim.load_msoa_locations.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.load_msoa_locations.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-microsim.main">
<span id="microsim-main-module"></span><h2>microsim.main module<a class="headerlink" href="#module-microsim.main" title="Permalink to this headline">¶</a></h2>
<p>Core RAMP-UA model.</p>
<p>Created on Wed Apr 29 19:59:25 2020</p>
<p>&#64;author: nick</p>
<dl class="py function">
<dt id="microsim.main.create_params">
<code class="sig-prename descclassname">microsim.main.</code><code class="sig-name descname">create_params</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">calibration_params</span></em>, <em class="sig-param"><span class="n">disease_params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.main.create_params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.main.run_opencl_model">
<code class="sig-prename descclassname">microsim.main.</code><code class="sig-name descname">run_opencl_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">individuals_df</span></em>, <em class="sig-param"><span class="n">activity_locations</span></em>, <em class="sig-param"><span class="n">time_activity_multiplier</span></em>, <em class="sig-param"><span class="n">iterations</span></em>, <em class="sig-param"><span class="n">data_dir</span></em>, <em class="sig-param"><span class="n">base_dir</span></em>, <em class="sig-param"><span class="n">use_gui</span></em>, <em class="sig-param"><span class="n">use_gpu</span></em>, <em class="sig-param"><span class="n">use_cache</span></em>, <em class="sig-param"><span class="n">initialise</span></em>, <em class="sig-param"><span class="n">calibration_params</span></em>, <em class="sig-param"><span class="n">disease_params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.main.run_opencl_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.main.run_python_model">
<code class="sig-prename descclassname">microsim.main.</code><code class="sig-name descname">run_python_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">individuals_df</span></em>, <em class="sig-param"><span class="n">activity_locations_df</span></em>, <em class="sig-param"><span class="n">time_activity_multiplier</span></em>, <em class="sig-param"><span class="n">msim_args</span></em>, <em class="sig-param"><span class="n">iterations</span></em>, <em class="sig-param"><span class="n">repetitions</span></em>, <em class="sig-param"><span class="n">parameters_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.main.run_python_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="microsim-microsim-initialisation-module">
<h2>microsim.microsim_initialisation module<a class="headerlink" href="#microsim-microsim-initialisation-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-microsim.microsim_model">
<span id="microsim-microsim-model-module"></span><h2>microsim.microsim_model module<a class="headerlink" href="#module-microsim.microsim_model" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="microsim.microsim_model.Microsim">
<em class="property">class </em><code class="sig-prename descclassname">microsim.microsim_model.</code><code class="sig-name descname">Microsim</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">individuals</span></em>, <em class="sig-param"><span class="n">activity_locations</span></em>, <em class="sig-param"><span class="n">time_activity_multiplier</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">random_seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">disable_disease_status</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">r_script_dir</span><span class="o">=</span><span class="default_value">'./R/py_int/'</span></em>, <em class="sig-param"><span class="n">data_dir</span><span class="o">=</span><span class="default_value">'./data/'</span></em>, <em class="sig-param"><span class="n">scen_dir</span><span class="o">=</span><span class="default_value">'default'</span></em>, <em class="sig-param"><span class="n">output</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">output_every_iteration</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">hazard_individual_multipliers</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">hazard_location_multipliers</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">risk_multiplier</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">disease_params</span><span class="o">=</span><span class="default_value">{}</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.microsim_model.Microsim" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class containing code for running timesteps of the Python/ R microsim model.
This operates on two main dataframes: individuals and activity_locations.</p>
<dl class="py method">
<dt id="microsim.microsim_model.Microsim.calculate_new_disease_status">
<code class="sig-name descname">calculate_new_disease_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.microsim_model.Microsim.calculate_new_disease_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Call an R function to calculate the new disease status for all individuals.
Update the indivdiuals dataframe in place
:rtype: <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>
:return: . Update the dataframe inplace</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.microsim_model.Microsim.change_behaviour_with_disease">
<code class="sig-name descname">change_behaviour_with_disease</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.microsim_model.Microsim.change_behaviour_with_disease" title="Permalink to this definition">¶</a></dt>
<dd><p>When people have the disease the proportions that they spend doing activities changes. This function applies
those changes inline to the individuals dataframe
:rtype: <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>
:return: None. Update the dataframe inplace</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.microsim_model.Microsim.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterations</span></em>, <em class="sig-param"><span class="n">repnr</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.microsim_model.Microsim.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the model (call the step() function) for the given number of iterations.
:type iterations: <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>
:param iterations: The number of iterations to run
:type repnr: <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>
:param repnr: The repition number of this model. Like an ID. Used to create new unique directory for this</p>
<blockquote>
<div><p>model instance.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="microsim.microsim_model.Microsim.step">
<code class="sig-name descname">step</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.microsim_model.Microsim.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Step (iterate) the model for 1 iteration</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="microsim.microsim_model.Microsim.update_behaviour_during_lockdown">
<code class="sig-name descname">update_behaviour_during_lockdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#microsim.microsim_model.Microsim.update_behaviour_during_lockdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Unilaterally alter the proportions of time spent on different activities before and after ‘lockddown’
Otherwise this doesn’t do anything update_behaviour_during_lockdown.</p>
<p>Note: ignores people who are currently showing symptoms (<cite>ColumnNames.DiseaseStatus.SYMPTOMATIC</cite>)</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.microsim_model.Microsim.update_venue_danger_and_risks">
<code class="sig-name descname">update_venue_danger_and_risks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">decimals</span><span class="o">=</span><span class="default_value">8</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.microsim_model.Microsim.update_venue_danger_and_risks" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the danger score for each location, based on where the individuals who have the infection visit.
Then look through the individuals again, assigning some of that danger back to them as ‘current risk’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>risk_multiplier</strong> – Risk is calcuated as duration * flow * risk_multiplier.</p></li>
<li><p><strong>decimals</strong> – Number of decimals to round the indivdiual risks and dangers to (defult 10). If ‘None’
then do no rounding</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-microsim.population_initialisation">
<span id="microsim-population-initialisation-module"></span><h2>microsim.population_initialisation module<a class="headerlink" href="#module-microsim.population_initialisation" title="Permalink to this headline">¶</a></h2>
<p>Core RAMP-UA model.</p>
<p>Created on Wed Apr 29 19:59:25 2020</p>
<p>&#64;author: nick</p>
<dl class="py class">
<dt id="microsim.population_initialisation.PopulationInitialisation">
<em class="property">class </em><code class="sig-prename descclassname">microsim.population_initialisation.</code><code class="sig-name descname">PopulationInitialisation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_dir</span><span class="o">=</span><span class="default_value">'./data/'</span></em>, <em class="sig-param"><span class="n">read_data</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">testing</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">debug</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">quant_object</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class used to load different datasources and generate the population of people ready to be iterated.
This produces dataframes of people and places ready to start either model implementation.</p>
<dl class="py method">
<dt id="microsim.population_initialisation.PopulationInitialisation.add_disease_columns">
<em class="property">classmethod </em><code class="sig-name descname">add_disease_columns</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">individuals</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation.add_disease_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds columns required to estimate disease prevalence</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="microsim.population_initialisation.PopulationInitialisation.add_individual_flows">
<em class="property">classmethod </em><code class="sig-name descname">add_individual_flows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">flow_type</span></em>, <em class="sig-param"><span class="n">individuals</span></em>, <em class="sig-param"><span class="n">flow_matrix</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation.add_individual_flows" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a flow matrix from MSOAs to (e.g. retail) locations and assign flows to individuals.</p>
<p>It a assigns the id of the destination of the flow according to its column in the matrix. So the first column
that has flows for a destination is given index 0, the second is index 1, etc. This is probably not the same as
the ID of the venue that they point to (e.g. the first store probably has ID 1, but will be given the index 0)
so it is important that when the activity_locations are created, they are created in the same order as the
columns that appear in the matix. The first column in the matrix must also be the first row in the locations
data.
:type flow_type: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>
:param flow_type: What type of flows are these. This will be appended to the column names. E.g. “Retail”.
:type individuals: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:param individuals: The DataFrame contining information about all individuals
:type flow_matrix: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:param flow_matrix: The flow matrix, created by (e.g.) read_retail_flows_data()
:rtype: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:return: The DataFrame of individuals with new locations and probabilities added</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.population_initialisation.PopulationInitialisation.add_work_flows">
<em class="property">classmethod </em><code class="sig-name descname">add_work_flows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">flow_type</span></em>, <em class="sig-param"><span class="n">individuals</span></em>, <em class="sig-param"><span class="n">workplaces</span></em>, <em class="sig-param"><span class="n">commuting_flows</span></em>, <em class="sig-param"><span class="n">flow_threshold</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation.add_work_flows" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dataframe of work locations that individuals travel to. The flows are based on general commuting
patterns and assume one work location per industry type MSOA.
:type flow_type: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>
:param flow_type: The name for these flows (probably something like ‘Work’)
:type individuals: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:param individuals: The dataframe of synthetic individuals
:type workplaces: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:param workplaces:  The dataframe of workplaces (i.e. occupations)
:type commuting_flows: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:param commuting_flows: The general commuting flows between MSOAs (an O-D matrix)
:param flow_threshold: Only include the top x destinations as possible flows. ‘None’ means no limit.
:rtype: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:return: The new ‘individuals’ dataframe (with new columns)</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.population_initialisation.PopulationInitialisation.check_sim_flows">
<em class="property">classmethod </em><code class="sig-name descname">check_sim_flows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">locations</span></em>, <em class="sig-param"><span class="n">flows</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation.check_sim_flows" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the flow matrix looks OK, raising an error if not
:type locations: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:param locations: A DataFrame with information about each location (destination)
:type flows: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:param flows: The flow matrix itself, showing flows from origin MSOAs to destinations
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.population_initialisation.PopulationInitialisation.extract_msoas_from_individuals">
<em class="property">classmethod </em><code class="sig-name descname">extract_msoas_from_individuals</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">individuals</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation.extract_msoas_from_individuals" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyse a DataFrame of individuals and extract the unique MSOA codes, returning them as a list in ascending
order
:type individuals: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:param individuals:
:rtype: <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.population_initialisation.PopulationInitialisation.generate_travel_time_colums">
<em class="property">classmethod </em><code class="sig-name descname">generate_travel_time_colums</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">individuals</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation.generate_travel_time_colums" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO Read the raw travel time columns and create standard ones to show how long individuals
spend travelling on different modes. Ultimately these will be turned into activities
:type individuals: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:param individuals:
:rtype: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.population_initialisation.PopulationInitialisation.pad_durations">
<em class="property">classmethod </em><code class="sig-name descname">pad_durations</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">individuals</span></em>, <em class="sig-param"><span class="n">activity_locations</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation.pad_durations" title="Permalink to this definition">¶</a></dt>
<dd><p>Some indvidiuals’ activity durations don’t add up to 1. In these cases pad them out with extra time at home.
:param individuals:
:param activity_locations:
:rtype: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:return: The new individuals dataframe</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.population_initialisation.PopulationInitialisation.read_commuting_flows_data">
<em class="property">classmethod </em><code class="sig-name descname">read_commuting_flows_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">study_msoas</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation.read_commuting_flows_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the commuting flows between each MSOA</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>study_msoas</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of MSOAs in the study area (flows outside of this will be ignored)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(&lt;class ‘pandas.core.frame.DataFrame’&gt;, &lt;class ‘pandas.core.frame.DataFrame’&gt;)</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dataframe with origin and destination flows in all MSOAs in the study area</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="microsim.population_initialisation.PopulationInitialisation.read_individual_time_use_and_health_data">
<em class="property">classmethod </em><code class="sig-name descname">read_individual_time_use_and_health_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">home_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation.read_individual_time_use_and_health_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a population of individuals. Includes time-use &amp; health info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>home_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A string to describe flows to people’s homes (probably ‘Home’)</p>
</dd>
</dl>
<p>:return A tuple with new dataframes of individuals and households</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="microsim.population_initialisation.PopulationInitialisation.read_retail_flows_data">
<em class="property">classmethod </em><code class="sig-name descname">read_retail_flows_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">study_msoas</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation.read_retail_flows_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the flows between each MSOA and the most commonly visited shops</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>study_msoas</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of MSOAs in the study area (flows outside of this will be ignored)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(&lt;class ‘pandas.core.frame.DataFrame’&gt;, &lt;class ‘pandas.core.frame.DataFrame’&gt;)</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple of two dataframes. One containing all of the flows and another</p>
</dd>
</dl>
<p>containing information about the stores themselves.</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.population_initialisation.PopulationInitialisation.read_school_flows_data">
<em class="property">classmethod </em><code class="sig-name descname">read_school_flows_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">study_msoas</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation.read_school_flows_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the flows between each MSOA and the most likely schools attended by pupils in this area.
All schools are initially read together, but flows are separated into primary and secondary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>study_msoas</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of MSOAs in the study area (flows outside of this will be ignored)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(&lt;class ‘pandas.core.frame.DataFrame’&gt;, &lt;class ‘pandas.core.frame.DataFrame’&gt;, &lt;class ‘pandas.core.frame.DataFrame’&gt;, &lt;class ‘pandas.core.frame.DataFrame’&gt;)</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple of three dataframes. All schools, then the flows to primary and secondary</p>
</dd>
</dl>
<p>(Schools, PrimaryFlows, SeconaryFlows). Although all the schools are one dataframe, no primary flows will flow
to secondary schools and vice versa).</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.population_initialisation.PopulationInitialisation.read_time_activity_multiplier">
<em class="property">static </em><code class="sig-name descname">read_time_activity_multiplier</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lockdown_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.population_initialisation.PopulationInitialisation.read_time_activity_multiplier" title="Permalink to this definition">¶</a></dt>
<dd><p>Some times people should spend more time at home than normal. E.g. after lockdown. This function
reads a file that tells us how much more time should be spent at home on each day.
:param lockdown_file: Where to read the mobility data from (assume it’s within the DATA_DIR).
:rtype: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:return: A dataframe with ‘day’ and ‘timeout_multiplier’ columns</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-microsim.quant_api">
<span id="microsim-quant-api-module"></span><h2>microsim.quant_api module<a class="headerlink" href="#module-microsim.quant_api" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="microsim.quant_api.QuantRampAPI">
<em class="property">class </em><code class="sig-prename descclassname">microsim.quant_api.</code><code class="sig-name descname">QuantRampAPI</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">quant_dir</span><span class="o">=</span><span class="default_value">'QUANT_RAMP'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.quant_api.QuantRampAPI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class that handles integration of QUANT data into the RAMP microsim model
QUANT spatial interaction data include probabilities of trips from MSOA 
or IZ origins to primary schools, secondary schools and retail locations.
Based on QUANTRampAPI.py provided by UCL</p>
<dl class="py method">
<dt id="microsim.quant_api.QuantRampAPI.getProbableHospitalByMSOAIZ">
<em class="property">static </em><code class="sig-name descname">getProbableHospitalByMSOAIZ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dfHospitalPopulation</span></em>, <em class="sig-param"><span class="n">dfHospitalZones</span></em>, <em class="sig-param"><span class="n">hospital_probHijmsoa_iz</span></em>, <em class="sig-param"><span class="n">threshold</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.quant_api.QuantRampAPI.getProbableHospitalByMSOAIZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an MSOA area code (England and Wales) or an Intermediate Zone (IZ) 2001 code (Scotland), return
a list of all the surrounding hospitals whose probabilty of being visited by the MSOA_IZ is
greater than or equal to the threshold.
Hospital ids are taken from the NHS England export of “location” - see hospitalZones for ids and names (and east/north)
NOTE: code identical to the primary school version, only with switched lookup tables
&#64;param msoa_iz An MSOA code (England/Wales e.g. E02000001) or an IZ2001 code (Scotland e.g. S02000001)
&#64;param threshold Probability threshold e.g. 0.5 means return all possible hospital points with probability&gt;=0.5
&#64;returns a list of [ {id: ‘hospitalid1’, p: 0.5}, {id: ‘hospitalid2’, p:0.6}, … etc] (NOTE: not sorted in any particular order)</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.quant_api.QuantRampAPI.getProbablePrimarySchoolsByMSOAIZ">
<em class="property">static </em><code class="sig-name descname">getProbablePrimarySchoolsByMSOAIZ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dfPrimaryPopulation</span></em>, <em class="sig-param"><span class="n">dfPrimaryZones</span></em>, <em class="sig-param"><span class="n">primary_probPij</span></em>, <em class="sig-param"><span class="n">msoa_iz</span></em>, <em class="sig-param"><span class="n">threshold</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.quant_api.QuantRampAPI.getProbablePrimarySchoolsByMSOAIZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an MSOA area code (England and Wales) or an Intermediate Zone (IZ) 2001 code (Scotland), return
a list of all the surrounding primary schools whose probabilty of being visited by the MSOA_IZ is
greater than or equal to the threshold.
School ids are taken from the Edubase list of URN
NOTE: code identical to the secondary school version, only with switched lookup tables
&#64;param msoa_iz An MSOA code (England/Wales e.g. E02000001) or an IZ2001 code (Scotland e.g. S02000001)
&#64;param threshold Probability threshold e.g. 0.5 means return all possible schools with probability&gt;=0.5
&#64;returns a list of probabilities in the same order as the venues</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.quant_api.QuantRampAPI.getProbableRetailByMSOAIZ">
<em class="property">static </em><code class="sig-name descname">getProbableRetailByMSOAIZ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dfRetailPointsPopulation</span></em>, <em class="sig-param"><span class="n">dfRetailPointsZones</span></em>, <em class="sig-param"><span class="n">retailpoints_probSij</span></em>, <em class="sig-param"><span class="n">msoa_iz</span></em>, <em class="sig-param"><span class="n">threshold</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.quant_api.QuantRampAPI.getProbableRetailByMSOAIZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an MSOA area code (England and Wales) or an Intermediate Zone (IZ) 2001 code (Scotland), return
a list of all the surrounding retail points whose probabilty of being visited by the MSOA_IZ is
greater than or equal to the threshold.
Retail ids are from ????
&#64;param msoa_iz An MSOA code (England/Wales e.g. E02000001) or an IZ2001 code (Scotland e.g. S02000001)
&#64;param threshold Probability threshold e.g. 0.5 means return all possible retail points with probability&gt;=0.5
&#64;returns a list of probabilities in the same order as the venues</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.quant_api.QuantRampAPI.getProbableSecondarySchoolsByMSOAIZ">
<em class="property">static </em><code class="sig-name descname">getProbableSecondarySchoolsByMSOAIZ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dfSecondaryPopulation</span></em>, <em class="sig-param"><span class="n">dfSecondaryZones</span></em>, <em class="sig-param"><span class="n">secondary_probPij</span></em>, <em class="sig-param"><span class="n">msoa_iz</span></em>, <em class="sig-param"><span class="n">threshold</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.quant_api.QuantRampAPI.getProbableSecondarySchoolsByMSOAIZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an MSOA area code (England and Wales) or an Intermediate Zone (IZ) 2001 code (Scotland), return
a list of all the surrounding secondary schools whose probabilty of being visited by the MSOA_IZ is
greater than or equal to the threshold.
School ids are taken from the Edubase list of URN
NOTE: code identical to the primary school version, only with switched lookup tables
&#64;param msoa_iz An MSOA code (England/Wales e.g. E02000001) or an IZ2001 code (Scotland e.g. S02000001)
&#64;param threshold Probability threshold e.g. 0.5 means return all possible schools with probability&gt;=0.5
&#64;returns a list of probabilities in the same order as the venues</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.quant_api.QuantRampAPI.get_flows">
<em class="property">classmethod </em><code class="sig-name descname">get_flows</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">venue</span></em>, <em class="sig-param"><span class="n">msoa_list</span></em>, <em class="sig-param"><span class="n">threshold</span></em>, <em class="sig-param"><span class="n">thresholdtype</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.quant_api.QuantRampAPI.get_flows" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare RAMP UA compatible data</p>
</dd></dl>

<dl class="py method">
<dt id="microsim.quant_api.QuantRampAPI.read_data">
<em class="property">classmethod </em><code class="sig-name descname">read_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">QUANT_DIR</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.quant_api.QuantRampAPI.read_data" title="Permalink to this definition">¶</a></dt>
<dd><p>reads in all data in provided data directory and creates series of class object attributes</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-microsim.r_interface">
<span id="microsim-r-interface-module"></span><h2>microsim.r_interface module<a class="headerlink" href="#module-microsim.r_interface" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="microsim.r_interface.RInterface">
<em class="property">class </em><code class="sig-prename descclassname">microsim.r_interface.</code><code class="sig-name descname">RInterface</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">script_dir</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.r_interface.RInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An RInterface object can be used to create an R session, initialise everything that is needed for the disease
status estimation function, and then interact with session to calculate the disease status.</p>
<dl class="py method">
<dt id="microsim.r_interface.RInterface.calculate_disease_status">
<code class="sig-name descname">calculate_disease_status</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">individuals</span></em>, <em class="sig-param"><span class="n">iteration</span></em>, <em class="sig-param"><span class="n">repnr</span></em>, <em class="sig-param"><span class="n">disease_params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.r_interface.RInterface.calculate_disease_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Call the R ‘run_status’ function to calculate the new disease status. It will return a new dataframe with
a few columns, including the new status.
:type individuals: <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
:param individuals:  The individuals dataframe from which new statuses need to be calculated
:type iteration: <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>
:param iteration: The iteration number (i.e. number of model steps so far)
:type repnr: <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>
:param repnr: The repetition number of the model. Like a unique ID for the model.
:type disease_params: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>
:param disease_params: A dictionary of disease parameters used in the R model.
:return: a new dataframe that includes new disease statuses</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-microsim.utilities">
<span id="microsim-utilities-module"></span><h2>microsim.utilities module<a class="headerlink" href="#module-microsim.utilities" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="microsim.utilities.Optimise">
<em class="property">class </em><code class="sig-prename descclassname">microsim.utilities.</code><code class="sig-name descname">Optimise</code><a class="headerlink" href="#microsim.utilities.Optimise" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Functions to optimise the memory use of pandas dataframes.
From <a class="reference external" href="https://medium.com/bigdatarepublic/advanced-pandas-optimize-speed-and-memory-a654b53be6c2">https://medium.com/bigdatarepublic/advanced-pandas-optimize-speed-and-memory-a654b53be6c2</a></p>
<dl class="py method">
<dt id="microsim.utilities.Optimise.optimize">
<em class="property">static </em><code class="sig-name descname">optimize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">datetime_features</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.utilities.Optimise.optimize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="microsim.utilities.check_durations_sum_to_1">
<code class="sig-prename descclassname">microsim.utilities.</code><code class="sig-name descname">check_durations_sum_to_1</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">individuals</span></em>, <em class="sig-param"><span class="n">activities</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.utilities.check_durations_sum_to_1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="microsim.utilities.data_setup">
<code class="sig-prename descclassname">microsim.utilities.</code><code class="sig-name descname">data_setup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span><span class="o">=</span><span class="default_value">'https://ramp0storage.blob.core.windows.net/rampdata/devon_data.tar.gz'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.utilities.data_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper function for downloading and unpacking Azure stored devon_data</p>
<dl class="simple">
<dt>Args:</dt><dd><p>archive (str): A string directory path to archive file using
url (str, optional): A url to an archive file. Defaults to “<a class="reference external" href="https://ramp0storage.blob.core.windows.net/rampdata/devon_data.tar.gz">https://ramp0storage.blob.core.windows.net/rampdata/devon_data.tar.gz</a>”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="microsim.utilities.download_data">
<code class="sig-prename descclassname">microsim.utilities.</code><code class="sig-name descname">download_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.utilities.download_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Download data utility function</p>
<dl class="simple">
<dt>Args:</dt><dd><p>url (str, optional): A url to an archive file. Defaults to “<a class="reference external" href="https://ramp0storage.blob.core.windows.net/rampdata/devon_data.tar.gz">https://ramp0storage.blob.core.windows.net/rampdata/devon_data.tar.gz</a>”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="microsim.utilities.unpack_data">
<code class="sig-prename descclassname">microsim.utilities.</code><code class="sig-name descname">unpack_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">archive</span></em><span class="sig-paren">)</span><a class="headerlink" href="#microsim.utilities.unpack_data" title="Permalink to this definition">¶</a></dt>
<dd><p>unpack tar data archive</p>
<dl class="simple">
<dt>Args:</dt><dd><p>archive (str): A string directory path to archive file using</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-microsim">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-microsim" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="ramp.html" class="btn btn-neutral float-right" title="OpenCL microsim model" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="RAMP-UA API Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, RAMP UA Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>